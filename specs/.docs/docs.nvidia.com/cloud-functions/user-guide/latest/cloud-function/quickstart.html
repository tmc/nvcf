<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quickstart &mdash; NVIDIA Cloud Functions latest documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/pygments_dark.css" type="text/css" />
      <link rel="stylesheet" href="../_static/theme-switcher-general.css" type="text/css" />
      <link rel="stylesheet" href="../_static/omni-style-dark.css" type="text/css" />
      <link rel="stylesheet" href="../_static/api-styles-dark.css" type="text/css" />
      <link rel="stylesheet" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" type="text/css" />
      <link rel="stylesheet" href="../_static/omni-style.css" type="text/css" />
      <link rel="stylesheet" href="../_static/api-styles.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/mermaid-init.js"></script>
        <script src="../_static/external-links.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/theme-setter.js"></script>
        <script src="../_static/design-tabs.js"></script>
        <script src="../_static/version.js"></script>
        <script src="../_static/social-media.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Elastic NIM" href="elastic-nim.html" />
    <link rel="prev" title="Overview" href="overview.html" />
 

    <script src="https://assets.adobedtm.com/5d4962a43b79/c1061d2c5e7b/launch-191c2462b890.min.js" ></script>
    


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >


<a href="../index.html">
  <img src="../_static/nvidia-logo-white.png" class="logo" alt="Logo"/>
</a>

<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">NVIDIA Cloud Functions</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#clone-build-and-push-the-docker-image-to-ngc-private-registry">Clone, Build and Push the Docker Image to NGC Private Registry</a></li>
<li class="toctree-l2"><a class="reference internal" href="#create-deploy-the-function-using-the-cloud-functions-ui">Create &amp; Deploy the Function Using the Cloud Functions UI</a></li>
<li class="toctree-l2"><a class="reference internal" href="#create-deploy-the-function-using-the-cloud-functions-api">Create &amp; Deploy the Function Using the Cloud Functions API</a></li>
<li class="toctree-l2"><a class="reference internal" href="#create-deploy-the-function-using-the-ngc-cli">Create &amp; Deploy the Function Using the NGC CLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="#invoke-the-function">Invoke the Function</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="elastic-nim.html">Elastic NIM</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="function-lifecycle.html">Function Lifecycle</a></li>
<li class="toctree-l1"><a class="reference internal" href="function-creation.html">Function Creation</a></li>
<li class="toctree-l1"><a class="reference internal" href="function-deployment.html">Function Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="function-management.html">Function Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="function-monitoring.html">Function Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="function-permissions.html">Function Permissions</a></li>
<li class="toctree-l1"><a class="reference internal" href="assets.html">Asset Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="cluster-management.html">Cluster Setup &amp; Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="account-access.html">NGC Account Access</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">NVIDIA Cloud Functions</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">


<li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
  
<li>Quickstart</li>

      <li class="wy-breadcrumbs-aside">
      </li>
<li class="wy-breadcrumbs-aside">

  <span>&nbsp;</span>
</li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="quickstart">
<span id="quick-start"></span><h1>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline"></a></h1>
<p>This guide gives an end-to-end workflow of how to create and deploy a container-based function on Cloud Functions, using the <a class="reference external" href="https://github.com/NVIDIA/nv-cloud-function-helpers/tree/main/examples/fastapi_echo_sample">fastapi_echo_sample container</a>. This is a minimal server that’s been configured to work with Cloud Functions, echoing whatever is sent to its inference endpoint.</p>
<p>Before beginning, ensure that you have <a class="reference internal" href="api.html#generate-personal-key"><span class="std std-ref">created an NGC Personal API Key</span></a> and <a class="reference internal" href="function-creation.html#ngc-private-registry-auth"><span class="std std-ref">authenticated with the NGC Docker Registry</span></a>.</p>
<section id="clone-build-and-push-the-docker-image-to-ngc-private-registry">
<h2>Clone, Build and Push the Docker Image to NGC Private Registry<a class="headerlink" href="#clone-build-and-push-the-docker-image-to-ngc-private-registry" title="Permalink to this headline"></a></h2>
<ol class="arabic simple">
<li><p>First clone and build the docker image.</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>&gt; git clone https://github.com/NVIDIA/nv-cloud-function-helpers.git
<span class="linenos">2</span>&gt; <span class="nb">cd</span> nv-cloud-function-helpers/examples/fastapi_echo_sample
<span class="linenos">3</span>&gt; docker build . -t fastapi_echo_sample
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Now tag and push the docker image to the NGC Private Registry.</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>&gt; docker tag fastapi_echo_sample:latest nvcr.io/<span class="nv">$ORG_NAME</span>/fastapi_echo_sample:latest
<span class="linenos">2</span>&gt; docker push nvcr.io/<span class="nv">$ORG_NAME</span>/fastapi_echo_sample:latest
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Once this finishes, you’ll now be able to see the new container in the <a class="reference external" href="https://registry.ngc.nvidia.com/containers">NGC Private Registry Containers Page</a> and it will be available for use in function creation.</p></li>
</ol>
</section>
<section id="create-deploy-the-function-using-the-cloud-functions-ui">
<h2>Create &amp; Deploy the Function Using the Cloud Functions UI<a class="headerlink" href="#create-deploy-the-function-using-the-cloud-functions-ui" title="Permalink to this headline"></a></h2>
<ol class="arabic simple">
<li><p>Navigate to the <a class="reference external" href="https://nvcf.ngc.nvidia.com/functions?filter=my-functions">Cloud Functions UI</a> and choose “Create Function”, then “Custom Container”. Enter the details for the <code class="docutils literal notranslate"><span class="pre">fastapi_echo_sample</span></code>. In this container, the inference endpoint is <code class="docutils literal notranslate"><span class="pre">/echo</span></code>, the health endpoint is <code class="docutils literal notranslate"><span class="pre">/health</span></code> and it exposes these on the default <code class="docutils literal notranslate"><span class="pre">8000</span></code> port. No other configuration changes are needed.</p></li>
</ol>
<img alt="../_images/container-function-creation-1.png" class="align-center" src="../_images/container-function-creation-1.png" />
<img alt="../_images/container-function-creation-2.png" class="align-center" src="../_images/container-function-creation-2.png" />
<ol class="arabic simple" start="2">
<li><p>Once created, the function will show up in the Functions List Page with the status <code class="docutils literal notranslate"><span class="pre">INACTIVE</span></code> because it is not yet deployed. By default, a function ID and function version ID is generated every time you create a new function or new function version.</p></li>
</ol>
<img alt="../_images/container-function-creation-3.png" class="align-center" src="../_images/container-function-creation-3.png" />
<ol class="arabic simple" start="3">
<li><p>Deploy the function by clicking the kebab menu on the right of the function row.</p></li>
</ol>
<img alt="../_images/container-function-deploy.png" class="align-center" src="../_images/container-function-deploy.png" />
</section>
<section id="create-deploy-the-function-using-the-cloud-functions-api">
<h2>Create &amp; Deploy the Function Using the Cloud Functions API<a class="headerlink" href="#create-deploy-the-function-using-the-cloud-functions-api" title="Permalink to this headline"></a></h2>
<ol class="arabic simple">
<li><p>Ensure you have an API key created, see <a class="reference internal" href="api.html#generate-personal-key"><span class="std std-ref">Generate an NGC Personal API Key</span></a>.</p></li>
<li><p>Find your NGC organization name within the <a class="reference external" href="https://org.ngc.nvidia.com/profile">NGC Organization Profile Page</a>. This is <em>not</em> the Display Name. For example: <code class="docutils literal notranslate"><span class="pre">qdrlnbkss123</span></code>.</p></li>
<li><p>Create the function via API by running the following curl with an <code class="docutils literal notranslate"><span class="pre">$API_KEY</span></code> and your <code class="docutils literal notranslate"><span class="pre">$ORG_NAME</span></code>.</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span> curl --location <span class="s1">&#39;https://api.ngc.nvidia.com/v2/nvcf/functions&#39;</span> <span class="se">\</span>
<span class="linenos"> 2</span> --header <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="se">\</span>
<span class="linenos"> 3</span> --header <span class="s1">&#39;Accept: application/json&#39;</span> <span class="se">\</span>
<span class="linenos"> 4</span> --header <span class="s1">&#39;Authorization: Bearer $API_KEY&#39;</span> <span class="se">\</span>
<span class="linenos"> 5</span> --data <span class="s1">&#39;{</span>
<span class="linenos"> 6</span><span class="s1">     &quot;name&quot;: &quot;my-echo-function&quot;,</span>
<span class="linenos"> 7</span><span class="s1">     &quot;inferenceUrl&quot;: &quot;/echo&quot;,</span>
<span class="linenos"> 8</span><span class="s1">     &quot;healthUri&quot;: &quot;/health&quot;,</span>
<span class="linenos"> 9</span><span class="s1">     &quot;inferencePort&quot;: 8000,</span>
<span class="linenos">10</span><span class="s1">     &quot;containerImage&quot;: &quot;nvcr.io/$ORG_NAME/fastapi_echo_sample:latest&quot;</span>
<span class="linenos">11</span><span class="s1"> }&#39;</span>
</pre></div>
</div>
<p>It will return a function ID listed as <code class="docutils literal notranslate"><span class="pre">id</span></code> and a function version ID listed as <code class="docutils literal notranslate"><span class="pre">versionId</span></code>.</p>
<ol class="arabic simple" start="4">
<li><p>List functions you’ve created via API using the following curl:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span> curl --location <span class="s1">&#39;https://api.ngc.nvidia.com/v2/nvcf/functions?visibility=private&#39;</span> <span class="se">\</span>
<span class="linenos">2</span> --header <span class="s1">&#39;Accept: application/json&#39;</span> <span class="se">\</span>
<span class="linenos">3</span> --header <span class="s1">&#39;Authorization: Bearer $API_KEY&#39;</span> <span class="se">\</span>
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Deploy the function via API using the following curl:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span> curl --location <span class="s1">&#39;https://api.ngc.nvidia.com/v2/nvcf/deployments/functions/$FUNCTION_ID/versions/$FUNCTION_VERSION_ID&#39;</span> <span class="se">\</span>
<span class="linenos"> 2</span> --header <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="se">\</span>
<span class="linenos"> 3</span> --header <span class="s1">&#39;Accept: application/json&#39;</span> <span class="se">\</span>
<span class="linenos"> 4</span> --header <span class="s1">&#39;Authorization: Bearer $API_KEY&#39;</span> <span class="se">\</span>
<span class="linenos"> 5</span> --data <span class="s1">&#39;{</span>
<span class="linenos"> 6</span><span class="s1"> &quot;deploymentSpecifications&quot;: [</span>
<span class="linenos"> 7</span><span class="s1">         {</span>
<span class="linenos"> 8</span><span class="s1">         &quot;backend&quot;: &quot;GFN&quot;,</span>
<span class="linenos"> 9</span><span class="s1">         &quot;gpu&quot;: &quot;L40G&quot;,</span>
<span class="linenos">10</span><span class="s1">         &quot;maxInstances&quot;: &quot;1&quot;,</span>
<span class="linenos">11</span><span class="s1">         &quot;minInstances&quot;: &quot;1&quot;</span>
<span class="linenos">12</span><span class="s1">         }</span>
<span class="linenos">13</span><span class="s1">     ]</span>
<span class="linenos">14</span><span class="s1"> }&#39;</span>
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li><p>Refer to the <a class="reference internal" href="api.html#open-api"><span class="std std-ref">OpenAPI Specification</span></a> for further API documentation.</p></li>
</ol>
</section>
<section id="create-deploy-the-function-using-the-ngc-cli">
<h2>Create &amp; Deploy the Function Using the NGC CLI<a class="headerlink" href="#create-deploy-the-function-using-the-ngc-cli" title="Permalink to this headline"></a></h2>
<ol class="arabic simple">
<li><p>Ensure you have an API key created, see <a class="reference internal" href="api.html#generate-personal-key"><span class="std std-ref">Generate an NGC Personal API Key</span></a>.</p></li>
<li><p>Ensure you have the <a class="reference internal" href="function-creation.html#ngc-cli-setup"><span class="std std-ref">NGC CLI configured</span></a>.</p></li>
<li><p>Run the following command to create the function, it will return a function ID and function version ID.</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span> ngc cf <span class="k">function</span> create --health-uri /health --inference-port <span class="m">8000</span> --container-image nvcr.io/<span class="nv">$ORG_NAME</span>/fastapi_echo_sample:latest --name my-echo-function --inference-url /echo
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>List functions you’ve created using the following command:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span> ngc cf <span class="k">function</span> list --access-filter<span class="o">=</span>private
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Deploy the function using the following command:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span> ngc cf <span class="k">function</span> deploy create --deployment-specification GFN:L40:gl40_1.br20_2xlarge:1:1 <span class="nv">$FUNCTION_ID</span>:<span class="nv">$FUNCTION_VERSION_ID</span>
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li><p>See <a class="reference external" href="https://docs.ngc.nvidia.com/cli/cmd_cloud-function.html">NGC CLI Documentation</a>. for further commands.</p></li>
</ol>
</section>
<section id="invoke-the-function">
<h2>Invoke the Function<a class="headerlink" href="#invoke-the-function" title="Permalink to this headline"></a></h2>
<p>Once your function is deployed, invoke its inference endpoint with the following curl:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span> curl --location <span class="s1">&#39;https://api.nvcf.nvidia.com/v2/nvcf/pexec/functions/$FUNCTION_ID&#39;</span> <span class="se">\</span>
<span class="linenos">2</span> --header <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="se">\</span>
<span class="linenos">3</span> --header <span class="s1">&#39;Authorization: Bearer $API_KEY&#39;</span> <span class="se">\</span>
<span class="linenos">4</span> --data <span class="s1">&#39;{</span>
<span class="linenos">5</span><span class="s1">     &quot;message&quot;: &quot;hello world&quot;</span>
<span class="linenos">6</span><span class="s1"> }&#39;</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
<img src="../_static/NVIDIA-LogoBlack.svg" class="only-light"/>
<img src="../_static/NVIDIA-LogoWhite.svg" class="only-dark"/>

<p class="notices">
<a href="https://www.nvidia.com/en-us/about-nvidia/privacy-policy/" target="_blank">Privacy Policy</a>
|
<a href="https://www.nvidia.com/en-us/about-nvidia/privacy-center/" target="_blank">Manage My Privacy</a>
|
<a href="https://www.nvidia.com/en-us/preferences/start/" target="_blank">Do Not Sell or Share My Data</a>
|
<a href="https://www.nvidia.com/en-us/about-nvidia/terms-of-service/" target="_blank">Terms of Service</a>
|
<a href="https://www.nvidia.com/en-us/about-nvidia/accessibility/" target="_blank">Accessibility</a>
|
<a href="https://www.nvidia.com/en-us/about-nvidia/company-policies/" target="_blank">Corporate Policies</a>
|
<a href="https://www.nvidia.com/en-us/product-security/" target="_blank">Product Security</a>
|
<a href="https://www.nvidia.com/en-us/contact/" target="_blank">Contact</a>
</p>

<p>
  Copyright &#169; 2024, NVIDIA Corporation.
</p>

    <p>
      <span class="lastupdated">Last updated on Aug 30, 2024.
      </span></p>

  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 

    <script type="text/javascript">if (typeof _satellite !== "undefined") {_satellite.pageBottom();}</script>
    



</body>
</html>